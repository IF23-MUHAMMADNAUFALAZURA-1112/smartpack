<ion-header class="header-custom">
  <ion-toolbar>
    <div class="header-content">
      <div class="logo-container">
        <img src="assets/img/SMARTPACK.png" alt="App Logo" class="logo" />
      </div>

      <div class="header-icons">
        
       <!-- Tombol Bantuan -->
<ion-icon
  name="help-circle-outline"
  class="icon-help"
  (click)="goToSmartHelp()">
</ion-icon>

  <!-- Tombol Notifikasi -->
  <ion-icon
    name="notifications-outline"
    class="icon-notif"
    (click)="goToSmartNotifikasi()">
  </ion-icon>
  
        <!-- Tombol Profil -->
        <ion-icon
          name="person-circle-outline"
          class="icon-profile"
          (click)="openPopover($event)">
        </ion-icon>
      </div>
    </div>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true" class="dashboard-content">

  <!-- ===== STATISTIK ===== -->
  <div class="stats-wrapper">
    <div class="stat-item">
      <p class="stat-label">Total Produk</p>
      <div class="stat-card">
        <ion-card-content>{{ totalProduk }}</ion-card-content>
      </div>
    </div>

    <div class="stat-item">
      <p class="stat-label">Selesai</p>
      <div class="stat-card">
        <ion-card-content>{{ selesaiProduk }}</ion-card-content>
      </div>
    </div>

    <div class="stat-item" [ngClass]="getWorkCardClass()">
      <p class="stat-label">Total Waktu Kerja</p>
      <div class="stat-card">
        <ion-card-content>{{ totalMenit }} menit</ion-card-content>
      </div>
    </div>
  </div>

  <!-- ===== DAFTAR WO ===== -->
  <ion-list class="wo-list">
    <ion-card *ngFor="let item of workOrders" class="wo-card" [ngClass]="item.status.toLowerCase()">
      <ion-grid>
        <ion-row>
          <ion-col size="4">
            <img [src]="item.image" alt="Product Image" class="product-image" />
          </ion-col>
          <ion-col size="8">
            <h2 class="product-name">{{ item.productName }}</h2>
            <p><strong>Part Number:</strong> {{ item.partNumber }}</p>
            <p><strong>No WO:</strong> {{ item.woNumber }}</p>
            <p><strong>Operator:</strong> {{ item.operatorCount }} orang</p>
            <p><strong>Standar Produksi:</strong> {{ item.standardTime }} menit</p>
            <p>
              <strong>Status: </strong>
              <span class="status" [ngClass]="item.status.toLowerCase()">{{ item.status }}</span>
            </p>
          </ion-col>
        </ion-row>
      </ion-grid>

      <ion-row class="action-buttons">
        <ion-col>
          <ion-button expand="block" fill="outline" color="primary" (click)="viewDetail(item)">
            Detail
          </ion-button>
        </ion-col>
        <ion-col>
          <ion-button expand="block" color="success" (click)="startWork(item)">
            Proses Pengerjaan
          </ion-button>
        </ion-col>
      </ion-row>
    </ion-card>
  </ion-list>

  <!-- ===== POPOVER PROFIL ===== -->
  <ion-popover [isOpen]="isPopoverOpen" (didDismiss)="isPopoverOpen = false" [event]="popoverEvent">
    <ng-template>
      <ion-list>
        <ion-item button (click)="lihatProfile()">
          <ion-icon name="person-outline" slot="start"></ion-icon>
          Lihat Profil
        </ion-item>
        <ion-item button (click)="logout()">
          <ion-icon name="log-out-outline" slot="start"></ion-icon>
          Logout
        </ion-item>
      </ion-list>
    </ng-template>
  </ion-popover>


  <!-- ===== NAVIGATION BAR ===== -->
  <app-btn-navigationbar></app-btn-navigationbar>
</ion-content>
